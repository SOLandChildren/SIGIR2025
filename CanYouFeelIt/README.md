# Can You Feel It? Exploring the Emotional Profile of LLM Responses to Children's Queries

This repository contains the code files and reported results of a study on the empirical exploration of the emotional undertone of LLM agents when responding to children's queries, submitted as a paper at the [2nd edition of IR4U2](https://ir4u2workshop.wixsite.com/ir4u2-2/blank-5), co-located at [SIGIR 2025](https://sigir2025.dei.unipd.it/). All personal data including queries procured from the user study conducted in the original study as well as IAS responses have been due to ethical considerations.

# Abstract

Agents based on Large Language Models (LLM) have introduced a new way of information seeking that could simplify the search process to suit children's cognitive skills, as these agents often respond to natural language inquiries with easy-to-read and plausible answers. Still, with emotions playing a crucial role in children's information seeking and consumption behaviours, it is important to consider whether these agents suit children's emotional intelligence. With that in mind, in this work, we examine the emotional undertones of LLM agent responses for children's inquiries. Considering the known impact of prompt engineering on an agent's response, we investigate whether explicitly informing an agent that the user is a child influences the emotions conveyed in its response. Outcomes from this empirical study reveal the limitations of LLM agents to fit children's emotional intelligence, with agents tending to over-amplify any underlying emotion in a child's inquiry. With our findings, we advance knowledge in the role of emotions in children's online search and offer insights that could be used to improve children's online information access.

# Citation

tbd.

# Reproducibility Code

## User Queries

Add user queries to ```Data/Queries/Queries.csv```. The CSV file contains the following columns:

1. ```QID```: The unique query ID
2. ```Query```: The query formulated by the child
3. ```Search Task Type```: Label for whether the search task is General of Emotionally-Charged
4. ```Search Task Sentiment```: The sentiment category assigned to an search task (General, Positive or Negative, in this study)

## Synthetic Log Generation

### Step 1: Accessing API endpoints
We rely on official API endpoints to elicit responses from ChatGPT, and Gemma. Each API endpoint requires an access token which is stored in ```Code/API_keys.json``` at the time of execution. In the JSON file, ```openAI_api``` for OpenAI API to generate ChatGPT responses, ```huggingface_api``` for HuggingFace API to generate Gemma responses.

Personal access tokens can be generated using the documentations linked below.

1. [OpenAI API](https://platform.openai.com/api-keys)
2. [HuggingFace API](https://huggingface.co/docs/hub/en/security-tokens)

**Note: Access tokens are meant to be private and it is strongly advised to remove the access token strings from the JSON file prior to sharing the code base publically to avoid any data leakage issues.**

### Step 2: Generating LLM responses

Run all all the code blocks in ```Code/API_calls.ipynb``` one after the other. It is advised to use a GPU to run the code block for Gemma response generation for time efficiency.

After all code blocks have run successfully, the ```Data/``` folder should be populated with three files each for Gemma and ChatGPT, comprising of responses generated by an LLM for a given prompt variation.

### Generating Emotional Profiles

We generate emotional profiles using the Inside Out framework introduced by [Landoni et al.](https://dl.acm.org/doi/abs/10.1145/3340631.3394847) and the `[``FEEL-IT```](https://aclanthology.org/2021.wassa-1.8/) strategy for emotion detection, available for deployment at [Hugging Face](https://huggingface.co/MilaNLProc/feel-it-italian-emotion).

Run all all the code blocks in ```Code/EP_generation.ipynb``` from the beginning in order.

Once all code blocks have run successfully, the query-wise sentiment and emotion vectors for each synthetic log will be stored under the ```Results/``` folder. A seprate file named ```EP.csv``` will also be created in the same folder containing all generated emotional profiles.

### Experiments

To run the statistical analyses, excute all code blocks in ```Code/experiments.csv``` in order, to generate the ```Results/Stats.csv``` containing all significance test values.



